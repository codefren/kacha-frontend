<div class="modal-add-service">

    <div class="row p-5">

        <div class="col-xl-6 col-12 text-xl-left text-center">

            <label class="title-modal"> {{ 'VEHICLES.SPECIFICATION' | translate }} </label>

        </div>

        <div class="col-xl-6 col-12 text-xl-right text-center point" (click)="close()">

            <img src="assets/icons/close1.svg">

        </div>


        <!-- type -->
        <form [formGroup]="vehicleServiceTypeForm" class="padding-form" style="width: 100%" novalidate action="" *ngIf="vehiclesServiceType">

            <div class="col-12 mt-4">

                <ng-container *ngIf="showCode">

                    <div class="form-group input-group" [ngClass]="{ 'has-danger': vehicleServiceTypeForm.controls['code'].invalid && (vehicleServiceTypeForm.controls['code'].dirty || vehicleServiceTypeForm.controls['code'].touched) }">

                        <span class="has-float-label w-100">

                            <ng-container  *ngIf="!vehiclesServiceType.id">

                                <input class="form-control point" id="code"  type="text" placeholder="{{ 'VEHICLES.SERVICE_TYPE.CODE' | translate }}" formControlName="code" [ngClass]="{'form-control-danger': vehicleServiceTypeForm.controls['code'].invalid && (vehicleServiceTypeForm.controls['code'].dirty || vehicleServiceTypeForm.controls['code'].touched)}"/>

                            </ng-container>

                            <ng-container  *ngIf="vehiclesServiceType.id">

                                <input class="form-control point" id="code" readonly type="text" placeholder="{{ 'VEHICLES.SERVICE_TYPE.CODE' | translate }}" formControlName="code" [ngClass]="{'form-control-danger': vehicleServiceTypeForm.controls['code'].invalid && (vehicleServiceTypeForm.controls['code'].dirty || vehicleServiceTypeForm.controls['code'].touched)}"/>

                            </ng-container>
                           
                        

                        <label for="first" class="mt-2 title-col"> {{ 'VEHICLES.SERVICE_TYPE.CODE' | translate }}   </label>

                        </span>

                        <ng-container *ngFor="let validation of sub_category_messages.code">

                            <div class="w-100 text-left">

                                <small class="form-control-feedback text-danger" *ngIf="

                                    vehicleServiceTypeForm.get('code').hasError(

                                        validation.type

                                    ) &&

                                    (vehicleServiceTypeForm.get('code').dirty ||

                                    vehicleServiceTypeForm.get('code').touched)
                                    ">

                                    {{ validation.message }}

                                </small>

                            </div>

                        </ng-container>


                        <label class="mt-3 color-label-info" *ngIf="!vehiclesServiceType.id" (click)="searchIncidentCode()">

                                <a class="colorLink  point color-a-sync" (click)="searchIncidentCode()" id="tooltip" disabled="false" data-toggle="tooltip" data-placement="top" title="Â¿Buscar codigo?">

                                    <i class="fas fa-sync color-icon-sync"></i>

                                    {{ 'VEHICLES.SERVICE_TYPE.GEMERATE_CODE_AUTOMATICALLY' | translate }}
                                    
                                </a>
                            
                        </label>

                    </div>

                </ng-container>

                <ng-container *ngIf="!showCode">

                    <div class="col-12 d-flex justify-content-center align-items-center">

                        <div class="fa-3x">

                            <i class="fas fa-circle-notch fa-spin"></i>

                        </div>

                    </div>

                </ng-container>

            </div>

            <div class="col-12 mt-3">

                <div class="form-group input-group" [ngClass]="{ 'has-danger': vehicleServiceTypeForm.controls['name'].invalid && (vehicleServiceTypeForm.controls['name'].dirty || vehicleServiceTypeForm.controls['name'].touched) }">

                    <span class="has-float-label w-100">

                        <input class="form-control point" id="name" type="text" placeholder="{{ 'VEHICLES.SERVICE_TYPE.SERVICE_NAME' | translate }}" formControlName="name" [ngClass]="{'form-control-danger': vehicleServiceTypeForm.controls['name'].invalid && (vehicleServiceTypeForm.controls['name'].dirty || vehicleServiceTypeForm.controls['name'].touched)}"/>

                        <label for="first" class="mt-2 title-col"> {{ 'VEHICLES.SPECIFICATION' | translate }} <span class="asterisco">* </span></label>
                    </span>

                    <ng-container *ngFor="let validation of sub_category_messages.name">

                        <div class="w-100 text-left">

                            <small class="form-control-feedback text-danger" *ngIf="

                                    vehicleServiceTypeForm.get('name').hasError(
                                        validation.type
                                    ) &&
                                    (vehicleServiceTypeForm.get('name').dirty ||
                                    vehicleServiceTypeForm.get('name').touched)
                                ">

                                {{ validation.message }}

                            </small>

                        </div>

                    </ng-container>

                </div>

            </div>


        </form>

        <div class="col-12 mt-3">

            <div class="form-row mt-2">

                <button class="btn btn-primary btn-block" type="button" [disabled]="!vehicleServiceTypeForm.valid" (click)="createVehiclesServiceType()">
                        <ng-container *ngIf="!vehiclesServiceType.id" >

                            {{ 'SHEET_ROUTE.ADD' | translate }}

                        </ng-container>

                        <ng-container *ngIf="vehiclesServiceType.id > 0" >

                            {{ 'GENERAL.SAVE' | translate }}

                        </ng-container>
                       
                    </button>

                <button class="btn btn-outline-primary btn-block" type="button" (click)="deleteService(vehiclesServiceType)" *ngIf="vehiclesServiceType.id > 0">

                    {{ 'GENERAL.DELETE' | translate }}

                </button>

            </div>

        </div>
    </div>
</div>