<div class="bills-list main-container container-fluid  p-0 pt-4 pb-4">

    <div class="d-flex row align-items-center justify-content-between pl-4 pr-4">

        <div class="col-12 col-xxl col-lg-6 col-sm-6 d-flex flex-row align-items-center justify-content-start">

            <div class="page-title">

                <img class="img-title" src="assets/icons/billIcons.svg">

                <span class="ml-2"> {{ 'BILLS.BILLING' | translate }} </span>

            </div>

        </div>

        <div class="col-xl-6 col-12 text-right">

            <div class="d-flex form-row flex-row align-items-center justify-content-end">

                <ng-container>

                    <!-- settings -->

                    <button class="btn btn-icon btn-icon-white dropdown-toggle p-2 mt-xl-0 mt-2" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

                        <img src="assets/icons/point.svg">

                    </button>

                    <div class="dropdown-menu letdrop" aria-labelledby="dropdownMenuButton">

                        <a class="dropdown-item drop-title border-drop pt-3 pb-3 point" (click)="openPdf()">

                            <img src="assets/icons/pdf1.svg" class="pr-2"> {{ 'SHEET_ROUTE.DOWNLOAD_PDF' | translate }}

                        </a>

                        <a class="dropdown-item drop-title border-drop pt-3 pb-3 point" (click)="openCsv()">

                            <img src="assets/icons/pdf1.svg" class="pr-2"> {{ 'SHEET_ROUTE.DOWNLOAD_EXCEL' | translate }}

                        </a>

                        <a class="dropdown-item drop-title pt-3 pb-3 point" (click)="openSetting()">

                            <img src="assets/icons/setting.svg" class="pr-2"> {{ 'SHEET_ROUTE.SETTING' | translate }}

                        </a>

                    </div>

                    <!-- settings -->

                </ng-container>

            </div>

        </div>

    </div>



    <!-- Cuadros informativos -->

    <div class="row align-items-center mt-3 pl-4 pr-4">

        <div class="col-xl col-md-6 col-12">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'BILLS.TOTAL_INVOICES' | translate }} </p>



                <ng-container *ngIf="showInfoDetail">

                    <p class="p-sub-number" *ngIf="informativeDevolution"> {{ informativeDevolution.totalBill }} </p>

                </ng-container>

                <ng-container *ngIf="!showInfoDetail">

                    <div class="fa-2x">

                        <i class="fas fa-circle-notch fa-spin"></i>

                    </div>

                </ng-container>

            </div>

        </div>

        <div class="col-xl col-md-6 col-12">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'BILLS.BILLS_COLLECTED' | translate }} </p>


                <ng-container *ngIf="showInfoDetail">

                    <p class="p-sub-number" *ngIf="informativeDevolution"> {{ informativeDevolution.billsCollected }} </p>

                </ng-container>

                <ng-container *ngIf="!showInfoDetail">

                    <div class="fa-2x">

                        <i class="fas fa-circle-notch fa-spin"></i>

                    </div>

                </ng-container>

            </div>

        </div>

        <div class="col-xl col-md-6 col-12">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'BILLS.INVOICES_RECEIVABLE' | translate }} </p>



                <ng-container *ngIf="showInfoDetail">

                    <p class="p-sub-number" *ngIf="informativeDevolution"> {{ informativeDevolution.billsReceivable }} </p>

                </ng-container>

                <ng-container *ngIf="!showInfoDetail">

                    <div class="fa-2x">

                        <i class="fas fa-circle-notch fa-spin"></i>

                    </div>

                </ng-container>

            </div>

        </div>

        <div class="col-xl col-md-6 col-12">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'BILLS.PAID_WITH_CARD' | translate }} </p>

                <ng-container *ngIf="showInfoDetail">

                    <p class="p-sub-number" *ngIf="informativeDevolution"> {{ informativeDevolution.paymentWithCard }} </p>

                </ng-container>

                <ng-container *ngIf="!showInfoDetail">

                    <div class="fa-2x">

                        <i class="fas fa-circle-notch fa-spin"></i>

                    </div>

                </ng-container>

            </div>

        </div>

        <div class="col-xl col-md-6 col-12">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'BILLS.PAID_WITH_CASH' | translate }} </p>

                <ng-container *ngIf="showInfoDetail">

                    <p class="p-sub-number" *ngIf="informativeDevolution"> {{ informativeDevolution.payWithCash }} </p>

                </ng-container>

                <ng-container *ngIf="!showInfoDetail">

                    <div class="fa-2x">

                        <i class="fas fa-circle-notch fa-spin"></i>

                    </div>

                </ng-container>

            </div>

        </div>

        <div class="col-xl-1 col-md-3 col-sm-4 col-12 mt-xl-0 mt-1 ">

            <div class="card card-rigth">

            </div>

        </div>

        <div class="col-xl-1 col-md-3 col-sm-4 col-12 mt-xl-0 mt-1 ">

            <div class="card card-rigth">

            </div>

        </div>

    </div>

    <!-- end Cuadros informativos -->



    <!-- filter -->

    <div class="row mt-3 pl-4 pr-4 align-items-center font-row mb-xl-0 mb-2">

        <div class="col-xl-9 col-12">

            <div class="col-md-12 col-12 p-0 m-0">

                <div class="form-row d-flex justify-content-start align-items-center mb-2 mt-2">


                    <!-- deliveryPointId -->

                    <div class="m-1">

                        <ng-container *ngIf="filter.values.deliveryPointId.length == 0">

                            <button id="deliveryPointId" class="btn btn-btn btn-cancel btn-block btn-no-radios class-input " type="button" (click)="addclient()">
    
                                {{'REPORT.SUMMARY_UPDATE_OF_DATA.CUSTOMER' | translate }}
        
                                <img src="assets/icons/donwload1.svg">
        
                            </button>

                        </ng-container>

                        <ng-container *ngIf="filter.values.deliveryPointId.length > 0 && filter.values.nameClient">

                            <button id="deliveryPointId" class="btn btn-btn btn-cancel btn-block btn-no-radios class-input " type="button" [title]="filter.values.nameClient" (click)="addclient()" *ngIf="filter.values.deliveryPointId.length > 0 && filter.values.nameClient">
    
                                <span> 
        
                                    {{ filter.values.nameClient | slice:0:15 }} {{ filter.values.nameClient.length > 25 ? '...' : '' }}
        
                                </span>
        
                                 <img src="assets/icons/donwload1.svg">
        
                            </button>

                        </ng-container>
                    </div>

                    <div class="m-1" *ngIf="filter.values.deliveryPointId.length > 0">

                        <button class="btn btn-btn btn-cancel-1 btn-block" (click)="clearClient()"> 
    
                            <img title="Limpiar filtro" src="assets/images/delete.svg">
    
                        </button>

                    </div>

                    <!-- end deliveryPointId -->

                    <!-- billPaymentStatusId -->

                    <div class="m-1">

                        <ng-container *ngIf="loadingPaymentStatus == 'loading'">

                            <div class="text-center p-2">

                                <div class="fa-3x">

                                    <i class="fas fa-circle-notch fa-spin"></i>

                                </div>

                            </div>

                        </ng-container>


                        <ng-container *ngIf="loadingPaymentStatus == 'success' && billPaymentStatus.length == 0">

                            <div class="text-center p-2">

                                <p class="text-center text-danger">{{ 'COMMERCIAL.DONT_EXIST_COMMERCIAL' | translate }}</p>

                            </div>

                        </ng-container>


                        <ng-container *ngIf="loadingPaymentStatus == 'success' && billPaymentStatus.length > 0">

                            <select id="billPaymentStatusId" (change)="ChangeFilter($event)" class="form-control-select-datatable size-select class-input form-control form-control-select  select-search-user point">
    
                                <option value=""> {{ 'BILLS.STATE' | translate }} </option>
    
                                <option *ngFor="let paymentStatus of billPaymentStatus" [value]="paymentStatus.id">{{paymentStatus.name}}</option>
    
                            </select>

                        </ng-container>

                        <div *ngIf="loadingPaymentStatus == 'error'">

                            <p class="text-danger text-center pointer" (click)="getBillPaymentStatus()">{{ 'BILLS.LOADING_ERROR' | translate }}<ins>{{ 'CLIENTS.CLIENTS_FORMS.HERE' | translate }}</ins>!</p>

                        </div>

                    </div>

                    <!-- end billPaymentStatusId -->

                    <!-- billPaymentTypeId -->

                    <div class="m-1">

                        <ng-container *ngIf="loadingPaymentType == 'loading'">

                            <div class="text-center p-2">

                                <div class="fa-3x">

                                    <i class="fas fa-circle-notch fa-spin"></i>

                                </div>

                            </div>

                        </ng-container>

                        <ng-container *ngIf="loadingPaymentType == 'success' && billPaymentType.length == 0">

                            <div class="text-center p-2">

                                <p class="text-center text-danger"> {{ 'COMMERCIAL.DONT_EXIST_COMMERCIAL' | translate }} </p>

                            </div>

                        </ng-container>


                        <ng-container *ngIf="loadingPaymentType == 'success' && billPaymentType.length > 0">

                            <select id="billPaymentTypeId" (change)="ChangeFilter($event)" class="form-control-select-datatable class-input size-select form-control form-control-select  select-search-user point">
    
                                <option value=""> {{ 'BILLS.PAYMENT_METHOD' | translate }} </option>
    
                                <option *ngFor="let paymentType of billPaymentType" [value]="paymentType.id">{{paymentType.name}}</option>
    
                            </select>

                        </ng-container>

                        <div *ngIf="loadingPaymentType == 'error'">

                            <p class="text-danger text-center pointer" (click)="getBillPaymentType()">{{ 'BILLS.LOADING_ERROR' | translate }}<ins>{{ 'CLIENTS.CLIENTS_FORMS.HERE' | translate }}</ins>!</p>

                        </div>

                    </div>

                    <!-- end -->

                    <!-- date -->

                    <div class="m-1">

                        <div class="dp-hidden position-absolute">

                            <div class="input-group">

                                <input name="datepicker" class="form-control class-input  input-size date1 point" ngbDatepicker #datepicker="ngbDatepicker" [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t" outsideDays="hidden" [startDate]="fromDate!"
                                    tabindex="-1" />

                                <ng-template #t let-date let-focused="focused">

                                    <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)" [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date" (mouseleave)="hoveredDate = null">
                                        {{ date.day }}
                                    </span>

                                </ng-template>

                            </div>

                        </div>

                        <div class="input-group">

                            <input #dpFromDate class="form-control form-control-date class-input" placeholder="yyyy-mm-dd" name="dpFromDate" [value]="formatter.format(fromDate) + ' - ' +formatter.format(toDate)" (input)="fromDate = validateInput(fromDate, dpFromDate.value)" />

                            <button class="btn btn-calendar calendar" (click)="datepicker.toggle()" type="button">
        
                                <img class="icons-calendar point" src="assets/icons/Vector.svg" aria-hidden="true">
    
                            </button>

                        </div>
                    </div>

                    <!-- end dates -->

                    <!-- PAYMENT_CHANNEL -->

                    <div class="m-1">

                        <ng-container *ngIf="loadingChargeType == 'loading'">

                            <div class="text-center p-2">

                                <div class="fa-3x">

                                    <i class="fas fa-circle-notch fa-spin"></i>

                                </div>

                            </div>

                        </ng-container>


                        <ng-container *ngIf="loadingChargeType == 'success' && billChargeType.length == 0">

                            <div class="text-center p-2">

                                <p class="text-center text-danger">{{ 'COMMERCIAL.DONT_EXIST_COMMERCIAL' | translate }}</p>

                            </div>

                        </ng-container>

                        <ng-container *ngIf="loadingChargeType == 'success' && billChargeType.length > 0">

                            <select id="billChargeTypeId" (change)="ChangeFilter($event)" class="form-control-select-datatable class-input size-select form-control form-control-select  select-search-user point">
    
                                <option value=""> {{ 'BILLS.PAYMENT_CHANNEL' | translate }} </option>
    
                                <option *ngFor="let chargeType of billChargeType" [value]="chargeType.id">{{chargeType.name}}</option>
    
                            </select>

                        </ng-container>

                        <div *ngIf="loadingChargeType == 'error'">

                            <p class="text-danger text-center pointer" (click)="getBillChargeType()">{{ 'BILLS.LOADING_ERROR' | translate }}<ins>{{ 'CLIENTS.CLIENTS_FORMS.HERE' | translate }}</ins>!</p>

                        </div>

                    </div>

                    <!-- end PAYMENT_CHANNEL -->

                </div>

            </div>



        </div>

        <div class="col-xl-3 col-12">

            <div class="form-row d-flex justify-content-end align-items-center">

                <div class="col-xl-9 col-12">

                    <div class="input-group datatables-input-group-width mr-xl-3 mr-3">

                        <input id="search" type="text" class="form-control search-general
                                pull-right input-personalize-datatable" placeholder="{{ 'COST.SEARCH' | translate }}" style="max-width: initial;">

                        <span class="input-group-append input-group-appenda">

                            <span class="input-group-text input-group-text-general table-append">

                                <img class="icons-search" src="assets/icons/optimmanage2/icono-lupanaranja.svg">

                            </span>

                        </span>

                    </div>

                </div>

                <div class="col-xl-3 col-12 text-xl-right text-center mt-xl-0 mt-2">

                    <button class="btn btn-default btn-edit-travel" id="dt-buttons-table" type="button">

                        <img src="assets/icons/edittable.svg">

                        Tabla
                        
                    </button>

                </div>

            </div>


        </div>


    </div>

    <!-- end filter -->



    <!-- table -->

    <div class="row">

        <div class="col-12">

            <div class="table-content table-content-general">

                <table class="table table-striped table-bordered table-responsive-lg mb-0" id="bills" style="text-align: center; width: 100%;">

                    <thead>



                        <tr>
                            <th>{{ 'BILLS.CODE' |translate }}</th>
                            <th>{{ 'BILLS.CLIENT' | translate }}</th>
                            <th> {{ 'BILLS.ADDRESS' | translate }} </th>
                            <th>{{ 'BILLS.COLLECTION_DATE' | translate }}</th>
                            <th>{{ 'BILLS.AMOUNT' | translate }}</th>
                            <th>{{ 'BILLS.PAYMENT_METHOD' | translate }}</th>
                            <th>{{ 'BILLS.PAYMENT_CHANNEL' | translate }}</th>
                            <th>{{ 'BILLS.PAYMENTS' | translate }}</th>
                            <th style="border-right: 1px solid #7387c2 !important;" class="colorAccionDatatable widthAccionDatatable "></th>
                        </tr>

                    </thead>

                    <tbody></tbody>

                </table>

            </div>

        </div>

    </div>

</div>