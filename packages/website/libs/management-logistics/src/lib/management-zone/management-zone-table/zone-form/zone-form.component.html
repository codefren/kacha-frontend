<div class="padding-body pt-0 bg-white2 optimroute-zone-form" *ngIf="data">

    <div class="container">

        <div class="row pt-5 align-items-center justify-content-center">

            <div class="mr-3 return-left point" routerLink="/management-logistics/delivery-zones">
                <i class="fas fa-angle-left addVehicleIcon p-1"></i>
            </div>
            <p class="title m-0" *ngIf="data.id !== ''">
                {{ 'DELIVERY_ZONES.EDIT_ZONE' | translate }}
            </p>
            <p class="title m-0" *ngIf="data.id === ''">
                {{ 'DELIVERY_ZONES.ADD_ZONE' | translate }}
            </p>

        </div>


        <div class="row justify-content-center mt-2">

            <div class="col-12 justify-content-center p-lg-0">

                <form [formGroup]="FormGroup" class="padding-form" style="width: 100%">

                    <div class="pl-0">
                        <div class="col-sm-12 subtitle-general pl-0 pt-3">
                            <label class="sytle-eschedule color-title-service-type mb-0">
                              {{ 'DELIVERY_ZONES.AREA_DATA' | translate }}
                            </label>
                        </div>
                    </div>

                    <div class="form-row mt-2">

                        <!-- name -->

                        <div class="col-12 col-md-5">
                            <div class="form-group" [ngClass]="{ 'has-danger': FormGroup.controls['name'].invalid && ( FormGroup.controls['name'].dirty || FormGroup.controls['name'].touched) }">
                                <label for="id">
                                    {{ 'DELIVERY_ZONES.NAME_' | translate }}
                                
                            </label>
                                <input type="text" class="form-control" id="name" formControlName="name" placeholder="{{ 'DELIVERY_ZONES.NAME_' | translate }}" [ngClass]="{
                                'form-control-danger':FormGroup.controls['name'].invalid &&
                                (FormGroup.controls['name'].dirty ||
                                FormGroup.controls['name'].touched)}" />

                                <ng-container *ngFor="let validation of deliveryZone_messages.name">
                                    <small class="form-control-feedback text-danger" *ngIf="
                                            FormGroup.get('name').hasError(validation.type) &&
                                            (FormGroup.get('name').dirty ||
                                                FormGroup.get('name').touched)
                                        ">
                                        {{ validation.message }}
                                    </small>
                                </ng-container>
                            </div>
                        </div>

                        <!-- end name -->

                        <!-- code -->

                        <div class="col-md-5 mt-2 col-12 mt-md-0 offset-md-2">
                            <div class="form-group" [ngClass]="{ 'has-danger': FormGroup.controls['id'].invalid && ( FormGroup.controls['id'].dirty || FormGroup.controls['id'].touched) }">
                                <label for="nif">
                                    {{ 'GENERAL.CODE' | translate }}
                                </label>
                                <input type="text" *ngIf="data.id == ''" class="form-control" id="id" formControlName="id" placeholder="{{ 'GENERAL.CODE' | translate }}" [ngClass]="{
                                        'form-control-danger':
                                        FormGroup.controls['id'].invalid &&
                                            (FormGroup.controls['id'].dirty ||
                                            FormGroup.controls['id'].touched)
                                }" />

                                <input *ngIf="data.id > '' || data.id != ''" type="text" readonly class="form-control" id="id" formControlName="id" placeholder="{{'GENERAL.CODE' | translate }}" />

                                <ng-container *ngFor="let validation of deliveryZone_messages.id">
                                    <div class="w-100 text-center">
                                        <small class="form-control-feedback text-danger" *ngIf="FormGroup.get('id').hasError( validation.type ) && (FormGroup.get('id').dirty || FormGroup.get('id').touched)">
                                        {{ validation.message }}
                                    </small>
                                    </div>
                                </ng-container>
                            </div>
                        </div>

                        <!-- end code -->


                        <!-- order and color -->
                        <div class="col-12 col-md-5 mt-3">
                            <div class="form-row">

                                <div class="col-6">
                                    <div class="form-group w-100" [ngClass]="{
                                        'has-danger':
                                            FormGroup.controls['order'].invalid &&
                                            (FormGroup.controls['order'].dirty ||
                                                FormGroup.controls['order'].touched)
                                    }">
                                        <label for="order">
                                            {{ 'DELIVERY_ZONES.ORDER' | translate }}
                                            <span class="asterisco"> *</span>
                                        </label>
                                        <input type="number" class="form-control" id="order" placeholder="{{ 'DELIVERY_ZONES.ORDER' | translate }}" formControlName="order" />

                                        <ng-container *ngFor="let validation of deliveryZone_messages.order">
                                            <small class="form-control-feedback text-danger" *ngIf="
                                                    FormGroup.get('order').hasError(validation.type) &&
                                                    (FormGroup.get('order').dirty ||
                                                        FormGroup.get('order').touched)
                                                ">
                                                {{ validation.message }}
                                            </small>
                                        </ng-container>
                                    </div>

                                    <div class="form-group row" *ngIf="FormGroup.hasError('same')">
                                        <div class="col-sm-12">
                                            <small class="form-control-feedback text-danger">
                                                {{ 'DELIVERY_ZONES.FROM_NO_GREATER_TO' | translate }}
                                            </small>
                                        </div>
                                    </div>


                                </div>

                                <div class="col-6">
                                    <div class="form-group w-100" [ngClass]="{
                                            'has-danger':
                                                    FormGroup.controls['color'].invalid &&
                                                    (FormGroup.controls['color'].dirty ||
                                                        FormGroup.controls['color'].touched)
                                        }">
                                        <label for="color">
                                                {{ 'DELIVERY_ZONES.COLOR' | translate }}
                                                <span class="asterisco"> *</span>
                                            </label>

                                        <div class="hack-select">
                                            <input type="color" class="form-control input-color" id="color" placeholder="{{ 'DELIVERY_ZONES.COLOR' | translate }}" formControlName="color" />
                                        </div>
                                        <ng-container *ngFor="let validation of deliveryZone_messages.name">
                                            <small class="form-control-feedback text-danger" *ngIf="
                                                        FormGroup.get('color').hasError(validation.type) &&
                                                        (FormGroup.get('color').dirty ||
                                                            FormGroup.get('color').touched)
                                                    ">
                                                    {{ validation.message }}
                                                </small>
                                        </ng-container>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- end order and color -->

                        <!-- Ruta associadad -->

                        <div class="col-md-5 mt-2 col-12 mt-md-3 offset-2">

                            <div class="form-group form-row" [ngClass]="{
                                'has-danger':
                                FormGroup.controls['associatedRoute'].invalid &&
                                (FormGroup.controls['associatedRoute'].dirty ||
                                FormGroup.controls['associatedRoute'].touched) }">
                                <label for="associatedRoute"> 
                                    {{ 'DELIVERY_POINTS.ASSOCIATED_PATH' | translate }}
                                   
                                </label>

                                <select class="form-control" formControlName="associatedRoute">
                                    <option  value="">Seleccione</option>
                                    <option *ngFor="let item of returnSpecificationValues()" [value]="item.name">
                                      {{ item.name }}
                                    </option>
                                </select>

                            </div>
                        </div>

                        <!-- end Ruta associadad  -->


                        <!-- isActive -->
                        <div class="col-12 col-md-5 mt-4">
                            <div class="form-group">
                                <div class="form-row">
                                    <div class="switch w-100 col-12">
                                        <label class="switch-width">
                                        <input
                                            type="checkbox"
                                            formControlName="isActive"
                                        />
                                        <span class="lever switch-col-primary m-0"></span>
    
                                        <span  class="pl-4">
                                            {{ 'Activo' }}
                                         </span>  
                                    </label>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end isActive -->

                    </div>

                    <!-- capacidad -->
                    <div class="pl-0 pt-3">
                        <div class="col-sm-12 subtitle-general pl-0 pt-3">
                            <label class="sytle-eschedule color-title-service-type mb-0 mb-0">
                          {{ 'DELIVERY_ZONES.CAPACITY_LOAD' | translate }}
                        </label>
                        </div>
                    </div>
                    <div class="col-12 col-md-5 mt-3 p-0">
                        <div class="form-group">
                            <div class="form-row">
                                <div class="switch w-100 col-12">
                                    <label class="switch-width">
                                    <input
                                        type="checkbox"
                                        formControlName="settingsIgnorecapacitylimit"
                                    />
                                    <span class="lever switch-col-primary m-0"></span>

                                    <span  class="pl-4">
                                        {{ 'DELIVERY_ZONES.IGNORE_CAPACITY_LIMIT' | translate }}
                                            <span data-toggle="tooltip" class="info" data-placement="top" title="{{ 'DELIVERY_ZONES.MESSAGE_1' | translate }}">
                                                <i class="fas fa-info-circle i-relative"></i>
                                            </span>
                                     </span>  
                                </label>

                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- end capacidad -->

                    <!-- delivery zone specification type -->
                    <div class="pl-0 pt-3">
                        <div class="col-sm-12 subtitle-general pl-0 pt-3">
                            <label class="sytle-eschedule color-title-service-type mb-0">
                                {{ 'DELIVERY_POINTS.PATH_SPECIFICATION' | translate }}
                            </label>
                        </div>

                        <div class="col-12 text-left pl-0">
                            <label for="" class="text-muted parrafo m-0">
                                {{ 'DELIVERY_POINTS.SELECT_WHICH_ROUTE_SPECIFICATION_TO_APPLY_TO_THIS_PARTICULAR_ROUTE_YOU_MUST_CREATE_THEM_ON_THE_SCREEN' | translate }}
                                <a class="point link" (click)="openDeliveryZoneSpecificationType()">{{'DELIVERY_POINTS.ROUTE_SPECIFICATION' | translate }}</a>
                                {{'DELIVERY_POINTS.TO_LATER_BE_ABLE_TO_SELECT_THEMS' | translate }}
                            </label>
                        </div>

                        <div class="pt-2">

                            <div class="form-row">

                                <div class="col-12 col-lg-12 col-md-12 pl-2 d-flex justify-content-between">
                                    <div class="form-row">

                                        <div class="round-new-form ml-0">
                                            <input type="checkbox" id="freeZOne" formControlName="free" [checked]="freeDisabled()" (click)="changeCleanLibre()" />
                                            <label for="freeZOne"></label>
                                        </div>
                                        <label title="{{ 'GENERAL.FREEE' | translate}}" for="freeZOne" style="margin-left: 1.3rem;">
                                            {{ 'GENERAL.FREEE' | translate}}
                                        </label>
                                    </div>
                                </div>
                                <ng-container>
                                    <ng-container *ngIf="deliveryZoneSpecificationType && deliveryZoneSpecificationType.length > 0">
                                        <div class="col-12 pl-lg-2">
                                            <div class="form-row">

                                                <div class="col-12 col-lg-3 col-md-4 pl-3 d-flex justify-content-between" formArrayName="deliveryZoneSpecificationType" *ngFor="let zone of 
                                                             FormGroup?.get('deliveryZoneSpecificationType')
                                                            ?.controls;
                                                                let z = index
                                                            ">
                                                    <div class="row">
                                                        <div class="round-new-form ml-0">
                                                            <input type="checkbox" id="{{ 'deliveryZoneSpecificationType' + deliveryZoneSpecificationType[z].id }}" [name]="z" [formControlName]="z" [value]="deliveryZoneSpecificationType[z].id" (change)="checkedSpecificationType($event.target.checked, z)"/>
                                                            <label [for]="'deliveryZoneSpecificationType'+ deliveryZoneSpecificationType[z].id"></label>
                                                        </div>
                                                        <label [title]="deliveryZoneSpecificationType[z].name" for="{{ 'deliveryZoneSpecificationType' + deliveryZoneSpecificationType[z].id }}" style="margin-left: 1.3rem;">
                                                            {{ sliceString( deliveryZoneSpecificationType[z].name ) }}
                                                        </label>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>


                                <ng-container *ngIf="!showServiceType">
                                    <div class="col-12 d-flex justify-content-center align-items-center">
                                        <div class="fa-5x mt-5">
                                            <i class="fas fa-circle-notch fa-spin"></i>
                                        </div>
                                    </div>
                                </ng-container>

                            </div>

                        </div>
                    </div>
                    <!-- end delivery zone specification type -->



                    <!-- end datos de cliente -->


                    <!-- btn action -->

                    <div class="row pt-5">
                        <div class="col-sm-4 offset-sm-2 col-12 text-center text-sm-right mt-1">
                            <button class="btn btn-default btn-cancel size-btn-form" type="button" routerLink="/management-logistics/delivery-zones">{{ 'GENERAL.CANCEL' | translate }}</button>
                        </div>
                        <div class="col-sm-4 col-12 text-center text-sm-left mt-1 pb-2">
                            <button class="btn btn-primary size-btn-form" type="submit" [disabled]="!FormGroup.valid || !FormGroup.dirty " (click)="submit()">
    
                                <ng-container *ngIf="data.id !== ''">
                                    {{ 'GENERAL.SAVE' | translate }}
                                </ng-container>
                                <ng-container *ngIf="data.id === ''">
                                    {{ 'GENERAL.ADD' | translate }}
                                </ng-container>
                            </button>
                        </div>
                    </div>

                    <!-- end btn action -->
                </form>


            </div>

        </div>

        <!-- end tap -->


    </div>
</div>