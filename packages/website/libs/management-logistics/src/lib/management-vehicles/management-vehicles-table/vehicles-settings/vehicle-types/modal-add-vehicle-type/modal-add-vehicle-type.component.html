<div class="modal-add-vehicles-type">

    <div class="row p-5">

        <div class="col-xl-6 col-12 text-xl-left text-center">

            <label class="title-modal"> {{'VEHICLES.VEHICLE_TYPE' | translate }} </label>

        </div>

        <div class="col-xl-6 col-12 text-xl-right text-center point" (click)="close()">

            <img src="assets/icons/close1.svg">

        </div>


        <!-- type -->
        <form [formGroup]="vehicleTypeForm" class="padding-form" style="width: 100%" novalidate action="" *ngIf="vehiclesServiceType">


            <div class="col-12 mt-3">

                <div class="form-group input-group" [ngClass]="{ 'has-danger': vehicleTypeForm.controls['name'].invalid && (vehicleTypeForm.controls['name'].dirty || vehicleTypeForm.controls['name'].touched) }">

                    <span class="has-float-label w-100">

                        <input class="form-control point" id="name" type="text" placeholder="Escribir..." formControlName="name" [ngClass]="{'form-control-danger': vehicleTypeForm.controls['name'].invalid && (vehicleTypeForm.controls['name'].dirty || vehicleTypeForm.controls['name'].touched)}"/>

                        <label for="first" class="mt-2 title-col"> {{ 'GENERAL.NAME' | translate }} <span class="asterisco">* </span></label>
                    </span>
                    <ng-container *ngFor="let validation of sub_category_messages.name">
                        <div class="w-100 text-left">
                            <small class="form-control-feedback text-danger" *ngIf="
                            vehicleTypeForm.get('name').hasError(
                                        validation.type
                                    ) &&
                                    (vehicleTypeForm.get('name').dirty ||
                                    vehicleTypeForm.get('name').touched)
                                ">
                                {{ validation.message }}
                            </small>
                        </div>
                    </ng-container>
                </div>
            </div>

            <div class="col-12 mt-3">
                <p class="sub-type"> {{'VEHICLES.ASSIGN_THE_MINIMUN_PERMITS_TO_DRIVE' | translate }} </p>
            </div>

            <div class="form-row mt-xl-0 pb-2">


                <ng-container *ngIf="showServiceType">

                    <ng-container *ngIf="licenseList && licenseList.length > 0">

                        <div class="col-12 pl-3 pr-4">

                            <div class="row">


                                <div class="col-12 col-lg-4 col-md-4 pl-xl-3 p-xl-0 mt-xl-2 mt-3" formArrayName="licenses" *ngFor="let filter of vehicleTypeForm?.get('licenses')?.controls; let g = index">

                                    <div class="border-special">

                                        <div class="row pl-4 pb-0 mb-0 pt-1 pb-2">

                                            <div class="round round-little margin-days round-1">

                                                <input type="checkbox" [formControlName]="g" [id]="licenseList[g].id" />

                                                <label [for]="licenseList[g].id"></label>

                                            </div>

                                            <label [title]="licenseList[g].name" [for]="licenseList[g].id" class="label-check point pl-2">

                                                {{ sliceString( licenseList[g].name ) }}

                                            </label>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>



                    </ng-container>

                </ng-container>

                <ng-container *ngIf="!showServiceType">
                    <div class="col-12 d-flex justify-content-center align-items-center">
                        <div class="fa-7x">
                            <i class="fas fa-circle-notch fa-spin"></i>
                        </div>
                    </div>
                </ng-container>
            </div>


        </form>



        <div class="col-12 mt-3">

            <div class="form-row mt-2">




                <button class="btn btn-primary btn-block" type="button" [disabled]="vehicleTypeForm && !vehicleTypeForm.valid || getFilterVAlue() && getFilterVAlue().length === 0" (click)="createVehiclesServiceType()">

                        <ng-container *ngIf="vehiclesServiceType && !vehiclesServiceType.id" >

                            {{ 'SHEET_ROUTE.ADD' | translate }}

                        </ng-container>

                        <ng-container *ngIf="vehiclesServiceType && vehiclesServiceType.id > 0" >

                            {{ 'GENERAL.SAVE' | translate }}

                        </ng-container>
                       
                </button>

                <button class="btn btn-outline-primary btn-block" type="button" (click)="deleteService(vehiclesServiceType)">

                        {{ 'GENERAL.DELETE' | translate }}

                </button>


            </div>

        </div>
    </div>
</div>