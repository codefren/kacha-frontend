<div class="optimroute-analysis-list main-container container-fluid p-0 pt-4 pb-4">

    <!-- Parte superior -->

    <div class="d-flex row align-items-center justify-content-between pl-4 pr-4">

        <div class="col-12 col-xxl col-lg-6 col-sm-6 d-flex flex-row align-items-center justify-content-start">

            <div class="page-title point" (click)="redirectTo()">
                <img _ngcontent-dnq-c5="" alt="cost" class="header-brand-img img-providers point" src="assets/icons/analisysClient.svg">
                <span class="ml-3 point"> {{ 'CLIENTS.CLIENTS_ANALYSIS.CLIENTS_ANALYSIS' | translate }} </span>
            </div>

        </div>

        <div class="col-xl-6 col-12 text-right">

            <div class="d-flex form-row flex-row align-items-center justify-content-end">

                <button class="btn btn-icon btn-icon-white dropdown-toggle p-2 mt-xl-0 mt-2" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="assets/icons/point.svg">
                </button>

                <div class="dropdown-menu letdrop" aria-labelledby="dropdownMenuButton">

                    <a class="dropdown-item drop-title border-drop pt-3 pb-3 point" (click)="openPdf()">

                        <img src="assets/icons/pdf1.svg" class="pr-2"> {{ 'CLIENTS.CLIENTS_ANALYSIS.DOWNLOAD_PDF' | translate }}

                    </a>

                    <a class="dropdown-item drop-title border-drop pt-3 pb-3 point" (click)="openCsv()">

                        <img src="assets/icons/pdf1.svg" class="pr-2"> {{ 'CLIENTS.CLIENTS_ANALYSIS.DOWNLOAD_EXCEL' | translate }}

                    </a>

                </div>


            </div>

        </div>

    </div>


    <!-- Cuadros informativos -->

    <div class="row align-items-center mt-3 pl-4 pr-4">

        <div class="col-xl col-md-6 col-12" *ngIf="validateCost()">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.TOTAL_COST' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <p class="p-sub-number"> {{ decimal(totalizedDate.totalCost) }} </p>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>
        </div>

        <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.BILLING' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <div class="size-price">

                        <p class="p-sub-number text-no-wrap" [title]="decimal(totalizedDate.totalBill)"> {{ decimal(totalizedDate.totalBill) }} </p>

                    </div>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>

        </div>

        <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2" *ngIf="validateCost()">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.LOGISTICS_PERCENTAGE_' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <p class="p-sub-number"> {{ formatLogist(totalizedDate.avgPorcentageLogistic) }} %</p>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>

        </div>

        <!-- <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2"  *ngIf="validateCost()">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.PASSED_ON' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <p class="p-sub-number"> {{ totalizedDate.repercussion }} % </p>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>

        </div> -->

        <!-- <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2"  *ngIf="validateCost()">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.MAXIMUM_COST' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <p class="p-sub-number"> {{ decimal(totalizedDate.maxCoste) }} </p>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>

        </div> -->

        <!-- <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2"  *ngIf="validateCost()">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_COST' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <p class="p-sub-number"> {{ decimal(totalizedDate.avgCost) }} </p>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>

        </div> -->

        <!-- <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2"  *ngIf="validateCost()">

            <div class="card card-left p-3">

                <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.MINIMUM_COST' | translate }} </p>

                <ng-container *ngIf="showCode">
                    <p class="p-sub-number"> {{ decimal(totalizedDate.minCost) }} </p>
                </ng-container>

                <ng-container *ngIf="!showCode">
                    <div class="fa-2x">
                        <i class="fas fa-circle-notch fa-spin"></i>
                    </div>
                </ng-container>

            </div>

        </div> -->
        <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

            <div class="card card-rigth"></div>

        </div>
        <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

            <div class="card card-rigth"></div>

        </div>

        <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

            <div class="card card-rigth"></div>

        </div>

        <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

            <div class="card card-rigth"></div>

        </div>

        <ng-container *ngIf="!validateCost()">
            <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2" *ngFor="let item of [1,2,3,4]">

                <div class="card card-rigth"></div>

            </div>
        </ng-container>


    </div>


    <!-- Filter -->

    <div class="row mt-3 pl-4 pr-4 align-items-center font-row mb-xl-0 mb-2">

        <div class="col-xl-10 col-12">

            <div class="form-row mb-1 mt-2 align-items-center">

                <!--      <div class="col-12 col-xl-3 col-sm-4 mb-1">

                    <div class="dp-hidden position-absolute">

                        <div class="input-group">

                            <input name="datepicker" class="form-control  input-size date1 point" ngbDatepicker #datepicker="ngbDatepicker" [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t" outsideDays="hidden" [startDate]="fromDate!"
                                tabindex="-1" />

                            <ng-template #t let-date let-focused="focused">

                                <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)" [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date" (mouseleave)="hoveredDate = null">
                                    {{ date.day }}
                                </span>

                            </ng-template>

                        </div>

                    </div>

                    <div class="input-group">

                        <input #dpFromDate class="form-control form-control-date" placeholder="yyyy-mm-dd" name="dpFromDate" [value]="formatter.format(fromDate) + ' - ' +formatter.format(toDate)" (input)="fromDate = validateInput(fromDate, dpFromDate.value)" />

                        <button class="btn btn-calendar calendar" (click)="datepicker.toggle()" type="button">
    
                            <img class="icons-calendar point" src="assets/icons/Vector.svg" aria-hidden="true">

                        </button>

                    </div>

                </div>
 -->
                <div class="col-12 col-xl-2 col-sm-4 mb-1 point">

                    <!-- <ng-container *ngIf="zones"> -->
                    <select id="year" [value]="filter.values.year" (change)="ChangeFilter($event)" class="form-control-select-datatable size-select form-control point">
                            <option value=""> {{ 'TRAVEL_TRACKING.YEAR' | translate }} </option>
                            <option *ngFor="let item of years" [value]="item" > {{ item }} </option>
                        </select>
                    <!-- </ng-container> -->

                    <!--  <ng-container *ngIf="!zones">
                        <div class="col-12 text-center mt-2">
                            <div class="fa-4x">
                                <i class="fas fa-circle-notch fa-spin"></i>
                            </div>
                        </div>
                    </ng-container> -->

                </div>

            </div>

        </div>

        <div class="col-xl-2 col-12 ">
            <!-- offset-xl-10 -->
            <div class="input-group datatables-input-group-width mr-xl-3 mr-3 mb-2 mt-2">
                <input id="search" type="text" class="form-control search-general
                        pull-right input-personalize-datatable" placeholder="{{ 'COST.SEARCH' | translate }}" style="max-width: initial;">
                <span class="input-group-append input-group-appenda">
                    <span class="input-group-text input-group-text-general table-append">
                        <img class="icons-search" src="assets/icons/optimmanage2/icono-lupanaranja.svg">
                    </span>
                </span>
            </div>
        </div>

    </div>

    <!-- Tabla -->

    <div class="row">

        <div class="col-12">
            <div class="table-content table-content-general">
                <table id="clientsAnalysis" style="width: 100%; text-align: center" class="table table-striped table-bordered table-responsive-lg mb-0">
                    <thead>
                        <tr>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.CODE' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.TYPOLOGY' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.CLIENT' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.ADDRESS' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.DELIVERIES' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.DELIVERIES' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_DOWNLOAD' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.INVOICE' | translate }}</th>
                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.LOGISTICS_PERCENTAGE' | translate }}</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

</div>