<!-- Cuadros informativos -->

<div class="d-flex justify-content-around mb-3 informative-chart">

    <div class="div-3" (click)="moveToLeft()">

        <div class="card card-left  justify-content-center point" style="width: 15px;">

            <img src="assets/icons/travelIcons/izquie.svg" style="max-width: 20px; vertical-align: bottom; margin: 0 auto;">

        </div>

    </div>

    <div class="div-3 size-element">

        <div id="scroller-wrapper">

            <div id="scroller" class="items point">

                <!-- total entrega -->

                <div class="elem">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{ 'CLIENTS.CLIENTS_ANALYSIS.DELIVERED_TOTAL' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ totalized.totalDelivered }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end total entrega -->

                <!-- Promedio Servicio -->

                <div class="elem">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{ 'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_SERVICE' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ dateFormat(totalized.avgService) }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end Promedio Servicio -->

                <!-- Total retrasos -->

                <div class="elem">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{'CLIENTS.CLIENTS_ANALYSIS.TOTAL_DELAY' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ totalized.totalDelay }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end Total retrasos -->

                <!-- Coste medio servicio -->

                <div class="elem" *ngIf="validateCost()">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_SERVICE_COST' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ formatLogist(totalized.avgServiceCost) }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end Coste medio servicio -->

                <!-- % logistico medio -->

                <div class="elem" *ngIf="validateCost()">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{'CLIENTS.CLIENTS_ANALYSIS.LOGISTICS_PERCENTAGE_' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ formatLogist(totalized.avgPorcentageLogistic) }} %</p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end % logistico -->

                <!-- Facturas pendientes -->

                <div class="elem" *ngIf="validateModuleBill()">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{'CLIENTS.CLIENTS_ANALYSIS.PENDING_INVOICE' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ totalized.pendingInvoice }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end Facturas pendientes -->

                <!-- Total devoluciones -->

                <div class="elem">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{'CLIENTS.CLIENTS_ANALYSIS.TOTAL_DEVOLUTION' | translate }}  </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="totalized"> {{ totalized.totalDevolution }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end Total devoluciones -->

                <!-- total envases -->

                <div class="elem">

                    <div class="card card-left p-3 mr-2 size-card-test">

                        <div class="page-title-span point">

                            <span class="ml-2 point spand-title-card"> {{'CLIENTS.CLIENTS_ANALYSIS.PACKAGING_BALANCE' | translate }} </span>

                        </div>

                        <ng-container *ngIf="showCode">

                            <p class="p-sub-number mt-3" *ngIf="clientAnalysis"> {{ clientAnalysis.pendingContainers }} </p>

                        </ng-container>

                        <ng-container *ngIf="!showCode">

                            <div class="fa-2x mt-3">

                                <i class="fas fa-circle-notch fa-spin"></i>

                            </div>

                        </ng-container>

                    </div>

                </div>

                <!-- end total envases -->


            </div>

        </div>
    </div>

    <div class="div-3" (click)="moveToRight()">

        <div class="card card-left  justify-content-center point" style="width: 15px;">

            <img src="assets/icons/travelIcons/dere.svg" style="max-width: 20px; vertical-align: bottom; margin: 0 auto;">

        </div>
    </div>
</div>

<!-- <div class="row align-items-center mb-3">

    <div class="col-xl col-md-6 col-12 pr-xl-0">

        <div class="card card-left p-3">

            <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.DELIVERED_TOTAL' | translate }} </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ totalized.totalDelivered }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

    <div class="col-xl col-md-6 col-12 pr-xl-0">

        <div class="card card-left p-3">

            <p class="p-title"> {{ 'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_SERVICE' | translate }} </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ dateFormat(totalized.avgService) }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

    <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2 pr-xl-0">

        <div class="card card-left p-3">

            <p class="p-title"> {{'CLIENTS.CLIENTS_ANALYSIS.TOTAL_DELAY' | translate }} </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ totalized.totalDelay }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

    <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2 pr-xl-0" *ngIf="validateCost()">

        <div class="card card-left p-3">

            <p class="p-title"> {{'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_SERVICE_COST' | translate }} </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ totalized.avgServiceCost }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

    <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2 pr-xl-0" *ngIf="validateModuleBill()">

        <div class="card card-left p-3">

            <p class="p-title"> {{'CLIENTS.CLIENTS_ANALYSIS.PENDING_INVOICE' | translate }} </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ totalized.pendingInvoice }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

    <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

        <div class="card card-left p-3">

            <p class="p-title"> {{'CLIENTS.CLIENTS_ANALYSIS.TOTAL_DEVOLUTION' | translate }} </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ totalized.totalDevolution }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

    <div class="col-xl col-md-6 col-12 mt-xl-0 mt-2">

        <div class="card card-left p-3">

            <p class="p-title"> Saldo envases </p>

            <ng-container *ngIf="showCode">
                <p class="p-sub-number" *ngIf="totalized"> {{ totalized.totalDevolution }} </p>
            </ng-container>

            <ng-container *ngIf="!showCode">
                <div class="fa-2x">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
            </ng-container>

        </div>

    </div>

</div> -->



<!-- ChÃ³feres que han servido a este cliente -->
<div class="row service-registration">

    <div class="col-12 mb-3">
        <div class="card">
            <!-- <div class="card-header">
                <p class="mb-0 title-answers"> {{'CLIENTS.CLIENTS_ANALYSIS.DRIVERS_WHO_HAVE_SERVED_THIS_CLIENT' | translate }} </p>
            </div> -->

            <div class="card-body">

                <p class="title-driver mb-3 mt-0"> {{'CLIENTS.CLIENTS_ANALYSIS.DRIVERS_WHO_HAVE_SERVED_THIS_CLIENT' | translate }} </p>

                <table class="table table-striped table-bordered mb-0 mt-1 table-content-general" id="driverHaveServedClientTable" style="text-align: center ; width: 100%;">

                    <thead>

                        <tr>

                            <th style="border-top-left-radius: 6px;">{{'CLIENTS.CLIENTS_ANALYSIS.DRIVER' | translate }}</th>

                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.SERVICES' |translate }}</th>

                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.DELAY' |translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.AVERAGE_SERVICE_' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.INVOICED' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.COST' | translate }}</th>

                        </tr>

                    </thead>

                    <tbody></tbody>

                </table>


            </div>

        </div>

    </div>
</div>



<!-- Registro de servicios -->
<div class="row service-registration">

    <div class="col-12">
        <div class="card">

            <div class="card-header">
                <p class="mb-0 title-answers"> {{'CLIENTS.CLIENTS_ANALYSIS.SERVICE_REGISTRATION' | translate }} </p>
                <p class="mb-0 sub-title"> {{'CLIENTS.CLIENTS_ANALYSIS.VISUALIZE_AND_SUPERVISE_A_COMFORTABLE_WAY_ALL_THE_SERVICES_TO_THIS_CLIENT' | translate }} </p>
            </div>


            <div class="card-body">

                <div class="col-md-12 col-12 pb-2 pr-0 pl-0 m-0">

                    <div class="form-row d-flex justify-content-xl-start justify-content-center align-items-end mb-2">

                        <div class="m-1 size-btn">

                            <div class="dp-hidden position-absolute">

                                <div class="input-group">

                                    <input name="datepicker" class="form-control  input-size date1 point" ngbDatepicker #datepicker="ngbDatepicker" [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t" outsideDays="hidden" [minDate]="{year: 2020, month: 1, day: 1}"
                                        [startDate]="fromDate!" tabindex="-1" />

                                    <ng-template #t let-date let-focused="focused">

                                        <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)" [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date" (mouseleave)="hoveredDate = null">
                                            {{ date.day }}
                                        </span>

                                    </ng-template>

                                </div>

                            </div>

                            <div class="input-group">

                                <input #dpFromDate class="form-control form-control-date" placeholder="yyyy-mm-dd" name="dpFromDate" [value]="formatter.format(fromDate) + ' - ' +formatter.format(toDate)" (input)="fromDate = validateInput(fromDate, dpFromDate.value)" />

                                <button class="btn btn-calendar calendar" (click)="datepicker.toggle()" type="button">

                                    <img class="icons-calendar point" src="assets/icons/Vector.svg" aria-hidden="true">

                                </button>

                            </div>

                        </div>

                        <div class="m-1 size-btn">

                            <div class="hack-select">

                                <select class="form-control letter-app" id="userId" (change)="ChangeFilter($event)" [(ngModel)]="filter.userId">

                                    <option value="" selected> {{ 'COST.DRIVER' | translate }} </option>

                                    <option *ngFor="let item of users" [value]="item.id" > {{ item.name }} {{ item.surname }}</option>

                                </select>

                            </div>

                        </div>

                        <div class="m-1 size-btn">

                            <div class="hack-select">

                                <select class="form-control letter-app" id="delayTimeOnDelivery" (change)="ChangeFilter($event)" [(ngModel)]="filter.delayTimeOnDelivery">

                                    <option value="" selected> {{'GENERAL.DELIVERY' | translate }} </option>

                                    <option value="on_time">{{ 'GENERAL.ON_TIME' | translate }} </option>

                                    <option value="late"> {{ 'GENERAL.LATE' | translate }} </option>

                                </select>

                            </div>

                        </div>

                    </div>

                </div>

                <table class="table table-striped table-bordered mb-0 mt-1 table-content-general" id="clientAnalysisTable" style="text-align: center ; width: 100%;">

                    <thead>

                        <tr>

                            <th style="border-top-left-radius: 6px;">{{'CLIENTS.CLIENTS_ANALYSIS.DATE' | translate }}</th>

                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.HOUR' |translate }}</th>

                            <th>{{ 'CLIENTS.CLIENTS_ANALYSIS.DRIVER' |translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.DELIVERY' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.SERVICE' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.COST' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.BILLING' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.BILLING' | translate }}</th>

                            <th style="border-top-right-radius: 6px;">{{ 'CLIENTS.CLIENTS_ANALYSIS.LOGISTICS_PERCENTAGE' | translate }}</th>

                        </tr>

                    </thead>

                    <tbody></tbody>

                </table>

            </div>

        </div>

    </div>
</div>
